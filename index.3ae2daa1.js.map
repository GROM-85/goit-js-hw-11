{"mappings":"gfAAA,I,EAAAA,EAAAC,EAAA,S,8EAMMC,G,GAAU,EAAAF,EAAAG,UAAA,SAAOC,G,IACbC,E,iEAAW,O,EAAMC,MAAMC,EAAAC,IAAM,IAAIC,gBAAgBL,K,OACvD,KADMC,EAAWK,EAAAC,QACJC,GACT,MAAM,IAAIC,MAAMR,EAASS,QAEtB,O,EAAMT,EAASU,Q,OAAtB,O,EAAOL,EAAAC,Q,GACX,I,SANuBP,G,iCA4BjBY,EAAA,W,OAAW,EAAAhB,EAAAG,UAAA,W,IAIHE,EAIJY,E,iEAJe,O,uBADjBC,EAAAC,QAAQC,OACS,C,EAAMlB,EAAQgB,EAAAC,U,cAAzBd,EAAWK,EAAAC,OAxBJU,EAyBFhB,EAzBEgB,KAEjBC,EAAAC,KAAKC,QAAQC,mBAAmB,aAAY,EAAAC,EAAAvB,SAAMkB,IAwB1BhB,EAAbsB,U,oBAELV,EAAAP,EAAAC,OACFiB,QAAQC,IAAIZ,EAAMa,S,wCA7BP,IAAET,C,GAkCrB,I,kDAdM,GA+BNU,OAAOC,iBAAiB,UAAS,EAAAC,EAAAC,UAAS3B,EAAA4B,OAb1C,WACI,IAIIC,EAAAC,SAASC,gBAHTC,EAGAH,EAHAG,UACAC,EAEAJ,EAFAI,aAIDD,EAFCH,EADAK,cAG2BD,EAAe,GAC1CxB,GAGR,IAEiE,CAC7D0B,SAAQ,G","sources":["src/js/myInfScroll.js"],"sourcesContent":["import {url,apiKEY,QUERY_KEY,DELAY} from \"./constants\";\nimport {refs} from \"./getRefs\";\nimport {options} from \"../index\";\nimport { throttle } from \"throttle-debounce\";\nimport cards from \"../templates/cards.hbs\";\n\nconst getImgs = async (opts) =>{\n    const response = await fetch(url + new URLSearchParams(opts));\n    if(!response.ok){\n        throw new Error(response.status);\n    }\n    return await response.json();\n}\n\nconst renderImgs = ({hits}) =>{\n\n    refs.gallery.insertAdjacentHTML(\"beforeend\",cards(hits));\n\n}\n\nconst showLoader = () => {\n    loader.classList.add(\"show\");\n}\n\nconst hideLoader = () => {\n    loader.classList.remove(\"show\");\n}\n\nconst hasMoreImgs = (page,limit,total) =>{\n    const startInd = (page - 1) * limit + 1;\n    return total === 0 || startInd < total;\n}\n\n\nconst loadImgs = async () => {\n    // showLoader();\n    try{\n        options.page++;\n        const response = await getImgs(options);\n        renderImgs(response);\n        const {totalHits} = response;\n    }\n    catch(error){\n        console.log(error.message);\n    }\n    finally{\n        //hideloader()\n    }\n}\n\n// scroll Event\n\nfunction onScrollHandler(){\n    const{\n        scrollTop,\n        scrollHeight,\n        clientHeight\n    } = document.documentElement;\n\n    if(scrollTop + clientHeight >= scrollHeight - 5 ){\n        loadImgs();\n    }\n    \n}\n\nwindow.addEventListener(\"scroll\",throttle(DELAY,onScrollHandler),{\n    passive:true\n});\n"],"names":["$7pbsT","parcelRequire","$1c954f31cbad1b11$var$getImgs","default","opts","response","fetch","$4s6iC","url","URLSearchParams","_state","sent","ok","Error","status","json","$1c954f31cbad1b11$var$loadImgs","error","$fSCrk","options","page","hits","$l1RgP","refs","gallery","insertAdjacentHTML","$5cQgp","totalHits","console","log","message","window","addEventListener","$iD6GO","throttle","DELAY","_document_documentElement","document","documentElement","scrollTop","scrollHeight","clientHeight","passive"],"version":3,"file":"index.3ae2daa1.js.map"}