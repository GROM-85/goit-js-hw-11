{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,oDAMA,MA4BMC,EAAWC,UAEb,IACIC,EAAAC,QAAQC,OACR,MAAMC,OAhCEJ,OAAOK,IACnB,MAAMD,QAAiBE,MAAMT,EAAAU,IAAM,IAAIC,gBAAgBH,IACvD,IAAID,EAASK,GACT,MAAM,IAAIC,MAAMN,EAASO,QAE7B,aAAaP,EAASQ,MAAI,EA2BCC,CAAQZ,EAAAC,SAxBpB,GAACY,KAACA,MAEjBC,EAAAC,KAAKC,QAAQC,mBAAmB,aAAY,EAAAC,EAAAC,SAAMN,GAAA,EAuB9CO,CAAWjB,GACX,MAAMkB,UAACA,GAAalB,CAOxB,CALA,MAAMmB,GACFC,QAAQC,IAAIF,EAAMG,QACtB,CAGA,EAkBJC,OAAOC,iBAAiB,UAAS,EAAAC,EAAAC,UAASjC,EAAAkC,OAb1C,WACI,MAAKC,UACDA,EAASC,aACTA,EAAYC,aACZA,GACAC,SAASC,gBAEVJ,EAAYE,GAAgBD,EAAe,GAC1ClC,GAGR,IAEiE,CAC7DsC,SAAQ","sources":["src/js/myInfScroll.js"],"sourcesContent":["import {url,apiKEY,QUERY_KEY,DELAY} from \"./constants\";\nimport {refs} from \"./getRefs\";\nimport {options} from \"../index\";\nimport { throttle } from \"throttle-debounce\";\nimport cards from \"../templates/cards.hbs\";\n\nconst getImgs = async (opts) =>{\n    const response = await fetch(url + new URLSearchParams(opts));\n    if(!response.ok){\n        throw new Error(response.status);\n    }\n    return await response.json();\n}\n\nconst renderImgs = ({hits}) =>{\n\n    refs.gallery.insertAdjacentHTML(\"beforeend\",cards(hits));\n\n}\n\nconst showLoader = () => {\n    loader.classList.add(\"show\");\n}\n\nconst hideLoader = () => {\n    loader.classList.remove(\"show\");\n}\n\nconst hasMoreImgs = (page,limit,total) =>{\n    const startInd = (page - 1) * limit + 1;\n    return total === 0 || startInd < total;\n}\n\n\nconst loadImgs = async () => {\n    // showLoader();\n    try{\n        options.page++;\n        const response = await getImgs(options);\n        renderImgs(response);\n        const {totalHits} = response;\n    }\n    catch(error){\n        console.log(error.message);\n    }\n    finally{\n        //hideloader()\n    }\n}\n\n// scroll Event\n\nfunction onScrollHandler(){\n    const{\n        scrollTop,\n        scrollHeight,\n        clientHeight\n    } = document.documentElement;\n\n    if(scrollTop + clientHeight >= scrollHeight - 5 ){\n        loadImgs();\n    }\n    \n}\n\nwindow.addEventListener(\"scroll\",throttle(DELAY,onScrollHandler),{\n    passive:true\n});\n"],"names":["$8G1wF","parcelRequire","$638f8dff78d5f5c0$var$loadImgs","async","$2Fivl","options","page","response","opts","fetch","url","URLSearchParams","ok","Error","status","json","$638f8dff78d5f5c0$var$getImgs","hits","$1DTXP","refs","gallery","insertAdjacentHTML","$44W7Q","default","$638f8dff78d5f5c0$var$renderImgs","totalHits","error","console","log","message","window","addEventListener","$bWR24","throttle","DELAY","scrollTop","scrollHeight","clientHeight","document","documentElement","passive"],"version":3,"file":"index.c2f53f66.js.map"}